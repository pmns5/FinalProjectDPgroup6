<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8">
    <title>Manage User</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" rel="stylesheet">

    <link href="../../css/myStyle.css" rel="stylesheet">

</head>

<body>

    <!-- Navbar -->
    <div id="nav-placeholder"></div>

    <!-- Banner Alert template and its section -->
    <template id="success-alert-template">
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <h4>{message}</h4>
            <button aria-label="Close" class="close" data-dismiss="alert" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </template>
    <template id="fail-alert-template">
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <h4>{message}</h4>
            <button aria-label="Close" class="close" data-dismiss="alert" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </template>
    <div class="container message" id="response-alert-section"></div>

    <!-- Table -->
    <section class="container">
        <div class="row">
            <table class="table table-bordered table-hover" id="table">
                <thead class="thead-light">
                    <tr>
                        <th>Username</th>
                        <th>Role</th>
                        <th>Ban</th>
                    </tr>
                </thead>
                <template id="table-template">
                    <tr>
                        <td>{USERNAME}</td>
                        <td>{ROLE}</td>
                        <td>{BAN}</td>
                        <td class="myIcon">
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="controller.toggleRole({ID_USER_R}, {ROLE_INT})">
                                <i class="fas fa-edit mr-2">Role</i>
                            </button>
                        </td>
                        <td class="myIcon">
                            <button class="btn btn-outline-primary btn-sm"
                                onclick="controller.toggleBan( {BAN_INT},{ID_USER_B},)">
                                <i class="fas fa-edit mr-2">Ban</i>
                            </button>
                        </td>
                    </tr>
                </template>
                <tbody id="table-rows"></tbody>
                <tfoot></tfoot>
            </table>
        </div>

    </section>

    <!-- JQuery api -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.js"></script>
    
    <!-- Bootstrap api -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript -->
    <script charset="utf-8" src="../../js/manager/ManageUser.js"></script>
    <script charset="utf-8" src="../../js/FormUtil.js"></script>
    <script charset="utf-8" src="../../js/CookieManagement.js"></script>
    <script charset="utf-8" src="../../js/GatewayEndPoint.js"></script>

    <script type="application/javascript">
        const controller = new ManageUser(ENDPOINT);
        $(document).ready(function () {
            $("#nav-placeholder").load("../navbar/navbarManager.html");
            checkCookie(false);
            $('#name-user').text(getCookieUsername())
            controller.fillTable();
        });
    </script>

</body>

</html>